<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ë„ ì˜ìœ ê¶Œ ì—­ì‚¬ ì¸í„°ë™í‹°ë¸Œ ì—°ëŒ€ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #F8F9FA;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 350px;
            margin: 0 auto;
        }
        .card-shadow {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
        }
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #F1F1F1;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #CBD5E1;
            border-radius: 20px;
        }
        .event-node:hover {
            transform: translateX(8px);
            transition: all 0.3s ease;
        }
        .active-event {
            border-left: 4px solid #1E3A8A;
            background-color: #EFF6FF;
        }
        .home-link:hover {
            background-color: #f1f5f9;
            transform: scale(1.05);
        }
    </style>
</head>
<body class="text-slate-900">

    <!-- Sticky Navigation / Header -->
    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200 py-4 px-6">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-4">
                <!-- Home Link to index.html -->
                <a href="index.html" class="home-link p-2 rounded-lg transition-all duration-200 flex items-center justify-center bg-slate-50 border border-slate-200 text-slate-600 shadow-sm" title="í™ˆìœ¼ë¡œ ì´ë™">
                    <span class="text-xl">ğŸ </span>
                </a>
                <h1 class="text-2xl font-bold text-slate-900 flex items-center gap-2">
                    <span class="w-2 h-6 bg-blue-900 rounded-full"></span>
                    ë…ë„ ì˜ìœ ê¶Œ ì—­ì‚¬ ì—°ëŒ€ê¸°
                </h1>
            </div>
            <nav class="flex gap-2 text-xs font-bold">
                <button onclick="filterData('all')" class="filter-btn px-4 py-2 rounded-full bg-slate-200 hover:bg-slate-300 transition ring-2 ring-slate-400" data-filter="all">ì „ì²´ë³´ê¸°</button>
                <button onclick="filterData('korea')" class="filter-btn px-4 py-2 rounded-full bg-blue-50 text-blue-800 hover:bg-blue-100 transition" data-filter="korea">í•œêµ­ ê¸°ë¡</button>
                <button onclick="filterData('japan')" class="filter-btn px-4 py-2 rounded-full bg-amber-50 text-amber-800 hover:bg-amber-100 transition" data-filter="japan">ì¼ë³¸ ì¸ì •</button>
                <button onclick="filterData('conflict')" class="filter-btn px-4 py-2 rounded-full bg-red-50 text-red-800 hover:bg-red-100 transition" data-filter="conflict">ë¶„ìŸ/ë„ë°œ</button>
            </nav>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-8 space-y-12">
        
        <!-- Interactive Section -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <!-- Timeline Overview -->
            <div class="lg:col-span-12 space-y-6">
                <section class="bg-white rounded-2xl p-6 card-shadow">
                    <div class="mb-4">
                        <h2 class="text-lg font-bold text-slate-800">ì—­ì‚¬ì  ì¦ê±° ë¶„í¬ (1454 - 2011)</h2>
                        <p class="text-sm text-slate-500">ê° ì ì€ í•˜ë‚˜ì˜ ì—­ì‚¬ì  ê¸°ë¡ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. í´ë¦­í•˜ì—¬ ìƒì„¸ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”.</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="timelineChart"></canvas>
                    </div>
                </section>
            </div>

            <!-- Chronological List -->
            <div class="lg:col-span-5 h-[600px] flex flex-col">
                <div class="bg-white rounded-t-2xl p-4 border-b border-slate-100 flex justify-between items-center">
                    <h3 class="font-bold text-slate-700 text-sm">ì—°ë„ë³„ ì£¼ìš” ì‚¬ê±´</h3>
                    <span class="text-xs text-slate-400 font-medium" id="itemCountText">18ê°œ ì‚¬ê±´</span>
                </div>
                <div id="eventList" class="bg-white rounded-b-2xl overflow-y-auto custom-scroll flex-1 p-4 space-y-3 card-shadow border-t-0">
                    <!-- List items via JS -->
                </div>
            </div>

            <!-- Focused Detail View -->
            <div class="lg:col-span-7">
                <div class="bg-white rounded-2xl card-shadow p-8 h-full border border-slate-100 overflow-hidden relative">
                    <div class="absolute -top-10 -right-10 opacity-5 pointer-events-none">
                        <span class="text-[12rem] font-black text-slate-900" id="detailBgYear">1454</span>
                    </div>

                    <div id="detailPanel" class="relative z-10 space-y-6 transition-all duration-300">
                        <div>
                            <span id="detailBadge" class="px-3 py-1 rounded-full text-xs font-bold uppercase tracking-widest"></span>
                            <h2 id="detailTitle" class="text-4xl font-bold text-slate-900 mt-4 leading-tight"></h2>
                            <div class="text-2xl font-light text-slate-400 mt-1" id="detailYearRange"></div>
                        </div>

                        <div class="space-y-4">
                            <div class="bg-slate-50 p-6 rounded-xl border-l-4 border-blue-900">
                                <h4 class="text-xs font-bold text-slate-400 uppercase mb-2">í•µì‹¬ ë‚´ìš© ë° ê°€ì¹˜</h4>
                                <p id="detailDesc" class="text-lg text-slate-700 leading-relaxed font-medium"></p>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="p-4 bg-white border border-slate-100 rounded-lg">
                                    <h4 class="text-xs font-bold text-blue-800 uppercase mb-1">ì—­ì‚¬ì  ìœ„ì¹˜</h4>
                                    <p id="detailType" class="text-slate-600 text-sm"></p>
                                </div>
                                <div class="p-4 bg-white border border-slate-100 rounded-lg">
                                    <h4 class="text-xs font-bold text-amber-800 uppercase mb-1">ì˜ìœ ê¶Œ ì˜ì˜</h4>
                                    <p id="detailImpact" class="text-slate-600 text-sm"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dictionary Section (Summarized) -->
        <section class="space-y-6">
            <div class="flex items-center gap-3">
                <div class="p-2 bg-blue-900 rounded-lg text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>
                </div>
                <h2 class="text-2xl font-bold text-slate-800">ë…ë„ í•µì‹¬ ìš©ì–´ ìš”ì•½ ì‚¬ì „</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Name Related -->
                <div class="bg-white p-6 rounded-2xl border border-slate-100 card-shadow space-y-4">
                    <h3 class="font-bold text-blue-800 border-b pb-2">1. ëª…ì¹­ ê´€ë ¨</h3>
                    <ul class="space-y-3">
                        <li>
                            <strong class="text-slate-900 block text-sm">ìš°ì‚°ë„ / ì„ë„</strong>
                            <p class="text-xs text-slate-600">ì‚¼êµ­ì‹œëŒ€ë¶€í„° ë¶ˆë¦° ì˜› ì´ë¦„ê³¼ 1900ë…„ ì¹™ë ¹ ì† ëª…ì¹­(ëŒì„¬).</p>
                        </li>
                        <li>
                            <strong class="text-slate-900 block text-sm">ë§ˆì“°ì‹œë§ˆ (ì†¡ë„)</strong>
                            <p class="text-xs text-slate-600">ê³¼ê±° ì¼ë³¸ì´ ë…ë„ë¥¼ ì§€ì¹­í•˜ë˜ ì´ë¦„.</p>
                        </li>
                        <li>
                            <strong class="text-slate-900 block text-sm">ë¦¬ì•™ì¿ ë¥´ì•”</strong>
                            <p class="text-xs text-slate-600">ì„œêµ¬ê¶Œì—ì„œ ë°œê²¬ í›„ ëª…ëª…í•œ ëª…ì¹­.</p>
                        </li>
                    </ul>
                </div>

                <!-- Documents Related -->
                <div class="bg-white p-6 rounded-2xl border border-slate-100 card-shadow space-y-4">
                    <h3 class="font-bold text-amber-800 border-b pb-2">2. í•µì‹¬ ê³ ë¬¸ì„œ</h3>
                    <ul class="space-y-3">
                        <li>
                            <strong class="text-slate-900 block text-sm">íƒœì •ê´€ ì§€ë ¹ (1877)</strong>
                            <p class="text-xs text-slate-600">ì¼ë³¸ ìµœê³ ê¸°ê´€ì´ ë…ë„ì˜ í•œêµ­ë ¹ì„ ê³µì‹ ì¸ì •í•œ ê²°ì •ì  ì¦ê±°.</p>
                        </li>
                        <li>
                            <strong class="text-slate-900 block text-sm">ëŒ€í•œì œêµ­ ì¹™ë ¹ 41í˜¸ (1900)</strong>
                            <p class="text-xs text-slate-600">ê·¼ëŒ€ ë²•ë ¹ìœ¼ë¡œ ë…ë„ ê´€í• ì„ ì „ ì„¸ê³„ì— ì„ í¬.</p>
                        </li>
                        <li>
                            <strong class="text-slate-900 block text-sm">SCAPIN ì œ677í˜¸ (1946)</strong>
                            <p class="text-xs text-slate-600">ì „í›„ ì—°í•©êµ°ì´ ë…ë„ë¥¼ ì¼ë³¸ í†µì¹˜ê¶Œì—ì„œ ì œì™¸í•¨.</p>
                        </li>
                    </ul>
                </div>

                <!-- Figure & Event -->
                <div class="bg-white p-6 rounded-2xl border border-slate-100 card-shadow space-y-4">
                    <h3 class="font-bold text-slate-800 border-b pb-2">3. ì¸ë¬¼ ë° ì‚¬ê±´</h3>
                    <ul class="space-y-3">
                        <li>
                            <strong class="text-slate-900 block text-sm">ì•ˆìš©ë³µ</strong>
                            <p class="text-xs text-slate-600">ì¼ë³¸ìœ¼ë¡œë¶€í„° 'ë„í•´ ê¸ˆì§€ë ¹'ì„ ì´ëŒì–´ë‚¸ ë¯¼ê°„ ì™¸êµê´€.</p>
                        </li>
                        <li>
                            <strong class="text-slate-900 block text-sm">ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€</strong>
                            <p class="text-xs text-slate-600">í•œêµ­ì „ìŸê¸° ìë°œì ìœ¼ë¡œ ë…ë„ë¥¼ ì§€ì¼œë‚¸ ë¯¼ê°„ ë‹¨ì²´.</p>
                        </li>
                        <li>
                            <strong class="text-slate-900 block text-sm">í‰í™”ì„  (1952)</strong>
                            <p class="text-xs text-slate-600">ì´ìŠ¹ë§Œ ëŒ€í†µë ¹ì˜ í•´ì–‘ ì£¼ê¶Œ ì„ ì–¸ìœ¼ë¡œ ë…ë„ ì˜ìœ ê¶Œ ëª…í™•í™”.</p>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

    </main>

    <script>
        // Data Object
        const dokdoHistory = [
            { year: 1454, title: "ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€", desc: "ìš°ì‚°(ë…ë„)ê³¼ ë¬´ë¦‰(ìš¸ë¦‰ë„)ì´ ê°•ì›ë„ ìš¸ì§„í˜„ì— ì†í•œë‹¤ê³  ê¸°ë¡ëœ ìµœì´ˆì˜ ê´€ì°¬ ì§€ë¦¬ì§€", category: "korea", type: "ê´€ì°¬ ì§€ë¦¬ì§€", impact: "ì¡°ì„  ì´ˆê¸°ë¶€í„° ë…ë„ë¥¼ í–‰ì • êµ¬ì—­ìœ¼ë¡œ ê´€ë¦¬í–ˆìŒì„ ì…ì¦" },
            { year: 1531, title: "ì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒ", desc: "ë…ë„ê°€ ìš°ë¦¬ ì˜í† ì„ì„ ë°íˆëŠ” ê´€ì°¬ ì§€ë¦¬ì§€ í¸ì°¬", category: "korea", type: "ê´€ì°¬ ì§€ë¦¬ì§€", impact: "êµ­ê°€ ì°¨ì›ì—ì„œ ë…ë„ ì˜ìœ ê¶Œì„ ëª…ë¬¸í™”í•¨" },
            { year: 1667, title: "ì€ì£¼ì‹œì²­í•©ê¸°", desc: "ì¼ë³¸ì˜ ë¬¸í—Œ. ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¼ë³¸ ì˜í†  ë°–(ì¡°ì„  ë•…)ì„ì„ ê¸°ë¡", category: "japan", type: "ì¼ë³¸ ë¬¸í—Œ", impact: "ì¼ë³¸ ìŠ¤ìŠ¤ë¡œ ë…ë„ê°€ ì¼ë³¸ ë•…ì´ ì•„ë‹˜ì„ ì¸ì •í•¨" },
            { year: 1693, title: "1ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", desc: "ì•ˆìš©ë³µì´ ì¼ë³¸ìœ¼ë¡œ ëŒë ¤ê°€ ë…ë„ê°€ ì¡°ì„  ë•…ì„ì„ ì£¼ì¥", category: "korea", type: "ë¯¼ê°„ ì™¸êµ í™œë™", impact: "ë¯¼ê°„ ì°¨ì›ì—ì„œë„ ë…ë„ ìˆ˜í˜¸ ì˜ì§€ë¥¼ ê°•ë ¥íˆ í‘œëª…" },
            { year: 1696, title: "2ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", desc: "ì¼ë³¸ ë§‰ë¶€ê°€ 'ìš¸ë¦‰ë„ ë„í•´ ê¸ˆì§€ë ¹'ì„ ë‚´ë¦¼. ë…ë„ ì˜ìœ ê¶Œ ì¬í™•ì¸", category: "japan", type: "ì¼ë³¸ ì™¸êµ ê²°ì •", impact: "ì¼ë³¸ ì •ë¶€ ê³µì‹ ì°¨ì›ì˜ ì˜í†  í¬ê¸° í™•ì¸" },
            { year: 1785, title: "ì‚¼êµ­ì ‘ì–‘ì§€ë„", desc: "í•˜ì•¼ì‹œ ì‹œí—¤ì´ê°€ ì œì‘. ë…ë„ë¥¼ ì¡°ì„ ìƒ‰(í™©ìƒ‰)ìœ¼ë¡œ ì¹ í•˜ê³  'ì¡°ì„ ì˜ ê²ƒ'ì´ë¼ í‘œê¸°", category: "japan", type: "ì¼ë³¸ ê³ ì§€ë„", impact: "ì‹œê°ì  ìë£Œë¥¼ í†µí•´ ë…ë„ê°€ ì¡°ì„  ì˜í† ì„ì„ ê³ ì¦" },
            { year: 1877, title: "íƒœì •ê´€ ì§€ë ¹", desc: "ì¼ë³¸ ìµœê³  í–‰ì •ê¸°ê´€ì´ 'ë…ë„ì™€ ìš¸ë¦‰ë„ëŠ” ì¼ë³¸ê³¼ ê´€ê³„ì—†ë‹¤'ê³  ê³µì‹ ì¸ì •", category: "japan", type: "ì¼ë³¸ ì •ë¶€ ê³µë¬¸ì„œ", impact: "ê·¼ëŒ€ê¸° ì¼ë³¸ ì •ë¶€ê°€ ë…ë„ ì˜ìœ ê¶Œì„ ê³µì‹ ë¶€ì¸í•¨" },
            { year: 1900, title: "ëŒ€í•œì œêµ­ ì¹™ë ¹ 41í˜¸", desc: "ê³ ì¢… í™©ì œê°€ ë…ë„ë¥¼ ìš¸ë¦‰êµ°ì˜ ê´€í•  êµ¬ì—­ìœ¼ë¡œ ê³µì‹ ë°˜í¬", category: "korea", type: "ëŒ€í•œì œêµ­ ë²•ë ¹", impact: "ê·¼ëŒ€ì  ë²•ì œë¥¼ í†µí•´ ë…ë„ ì˜ìœ ê¶Œì„ ì „ ì„¸ê³„ì— ì„ í¬" },
            { year: 1905, title: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ 40í˜¸", desc: "ì¼ë³¸ì´ ëŸ¬ì¼ì „ìŸ ì¤‘ ë…ë„ë¥¼ ë¶ˆë²•ì ìœ¼ë¡œ 'ë‹¤ì¼€ì‹œë§ˆ'ë¡œ í¸ì…", category: "conflict", type: "ì¼ë³¸ ë¶ˆë²• ì¡°ì¹˜", impact: "ì œêµ­ì£¼ì˜ì  ì˜í†  ì¹¨íƒˆì˜ ì‹œì‘ì " },
            { year: 1906, title: "ì‹¬í¥íƒ ë³´ê³ ì„œ", desc: "ìš¸ë¦‰êµ°ìˆ˜ ì‹¬í¥íƒì´ ë…ë„ê°€ ì¼ë³¸ì— í¸ì…ë˜ì—ˆë‹¤ëŠ” ì†Œì‹ì„ ë“£ê³  ì¤‘ì•™ ì •ë¶€ì— ë³´ê³ ", category: "korea", type: "í–‰ì • ë³´ê³ ì„œ", impact: "ì¼ë³¸ì˜ ì¹¨íƒˆì— ëŒ€í•œ ì¦‰ê°ì ì¸ êµ­ê°€ì  ëŒ€ì‘ ê¸°ë¡" },
            { year: 1946, title: "SCAPIN ì œ677í˜¸", desc: "ì—°í•©êµ°ìµœê³ ì‚¬ë ¹ê´€ ì§€ë ¹. ë…ë„ë¥¼ ì¼ë³¸ì˜ í†µì¹˜ê¶Œì—ì„œ ì œì™¸í•¨", category: "international", type: "êµ­ì œ ì—°í•©êµ° ì§€ë ¹", impact: "ì „í›„ êµ­ì œë²•ì ìœ¼ë¡œ ë…ë„ê°€ í•œêµ­ ì˜í† ì„ì„ ì¬í™•ì¸" },
            { year: 1951, title: "ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½", desc: "ì¼ë³¸ì´ í•œêµ­ì˜ ë…ë¦½ì„ ì¸ì • (ë…ë„ ëª…ì‹œ ëˆ„ë½ìœ¼ë¡œ ë¶„ìŸì˜ ì”¨ì•—ì´ ë¨)", category: "international", type: "êµ­ì œ í‰í™” ì¡°ì•½", impact: "í˜„ëŒ€ ë…ë„ ë¶„ìŸì˜ ì™¸êµì  ë°°ê²½ì´ ë¨" },
            { year: 1952, title: "í‰í™”ì„  ì„ í¬", desc: "ì´ìŠ¹ë§Œ ëŒ€í†µë ¹ì´ ë…ë„ë¥¼ í¬í•¨í•œ ì¸ì ‘ í•´ì–‘ ì£¼ê¶Œ ì„ ì–¸", category: "korea", type: "í•œêµ­ ëŒ€í†µë ¹ ì„ ì–¸", impact: "ì‹ ìƒ ëŒ€í•œë¯¼êµ­ ì •ë¶€ì˜ ë…ë„ ìˆ˜í˜¸ ì˜ì§€ ì²œëª…" },
            { year: 1953, title: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ í™œë™", desc: "í™ìˆœì¹  ë“± ë¯¼ê°„ì¸ë“¤ì´ ë…ë„ì— ìƒì£¼í•˜ë©° ì¼ë³¸ì˜ ì¹¨ë²”ì„ ë§‰ìŒ", category: "korea", type: "ë¯¼ê°„ ìˆ˜ë¹„ í™œë™", impact: "ì‹¤ì§ˆì ì¸ ì ìœ ì™€ ìˆ˜í˜¸ë¥¼ ì‹¤ì²œí•œ ë¯¼ì¡±ì  ì €ë ¥" },
            { year: 1965, title: "í•œì¼ê¸°ë³¸ì¡°ì•½", desc: "ë…ë„ ë¬¸ì œë¥¼ ì–¸ê¸‰í•˜ì§€ ì•Šê³  ë´‰í•© (ì´í›„ ê°ˆë“± ì ë³µ)", category: "international", type: "êµ­ì œ ì¡°ì•½", impact: "í•œì¼ ê´€ê³„ì˜ ë³µì¡í•œ ì •ì¹˜ì  íƒ€í˜‘ ê²°ê³¼" },
            { year: 1998, title: "ì‹ í•œì¼ì–´ì—…í˜‘ì •", desc: "ë…ë„ê°€ í•œì¼ ì¤‘ê°„ìˆ˜ì—­ì— í¬í•¨ë˜ë©° ë…¼ë€ ë°œìƒ", category: "international", type: "ê²½ì œ í˜‘ì •", impact: "í•´ì–‘ ìì›ê¶Œ ë° ì˜ìœ ê¶Œ ë…¼ìŸì˜ ì¬ì í™”" },
            { year: 2005, title: "ë‹¤ì¼€ì‹œë§ˆì˜ ë‚  ì œì •", desc: "ì¼ë³¸ ì‹œë§ˆë„¤í˜„ì´ 2ì›” 22ì¼ì„ 'ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ 'ë¡œ ì œì •", category: "conflict", type: "ì¼ë³¸ ì§€ìì²´ ì¡°ë¡€", impact: "ì¼ë³¸ì˜ ì˜ìœ ê¶Œ ì£¼ì¥ ë³¸ê²©í™” ë° ê°ˆë“± ì‹¬í™”" },
            { year: 2011, title: "ì¼ë³¸ êµê³¼ì„œ ì™œê³¡", desc: "ì¼ë³¸ ì¤‘í•™êµ êµê³¼ì„œ 14ì¢…ì— ë…ë„ ì˜ìœ ê¶Œ ì£¼ì¥ ê¸°ìˆ ", category: "conflict", type: "êµìœ¡ ì •ì±… ì™œê³¡", impact: "ë¯¸ë˜ ì„¸ëŒ€ì— ì˜ëª»ëœ ì—­ì‚¬ê´€ ì£¼ì… ì‹œë„" }
        ];

        let currentFilter = 'all';
        let selectedId = 0;
        let chart = null;

        document.addEventListener('DOMContentLoaded', () => {
            initChart();
            renderList();
            showDetail(0);
        });

        function initChart() {
            const ctx = document.getElementById('timelineChart').getContext('2d');
            const dataPoints = dokdoHistory.map((d, i) => ({
                x: d.year,
                y: getCategoryY(d.category),
                r: 8,
                index: i,
                category: d.category
            }));

            chart = new Chart(ctx, {
                type: 'bubble',
                data: {
                    datasets: [{
                        data: dataPoints,
                        backgroundColor: dataPoints.map(d => getCategoryColor(d.category, 0.7)),
                        borderColor: dataPoints.map(d => getCategoryColor(d.category, 1)),
                        borderWidth: 2,
                        hoverRadius: 12
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { min: 1400, max: 2050, grid: { display: false }, ticks: { color: '#94A3B8' } },
                        y: {
                            min: 0, max: 5,
                            ticks: {
                                stepSize: 1,
                                callback: value => {
                                    if (value === 4) return 'í•œêµ­ ì˜ìœ ê¶Œ í™•ë¦½';
                                    if (value === 3) return 'êµ­ì œ ê´€ê³„/ì¡°ì•½';
                                    if (value === 2) return 'ì¼ë³¸ì¸¡ ë¬¸í—Œ';
                                    if (value === 1) return 'ë¶„ìŸ/ë„ë°œ';
                                    return '';
                                },
                                color: '#475569',
                                font: { weight: 'bold' }
                            },
                            grid: { color: '#F1F5F9' }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { label: (ctx) => { const d = dokdoHistory[ctx.raw.index]; return `${d.year}: ${d.title}`; } } }
                    },
                    onClick: (e, els) => { if (els.length > 0) { const index = els[0].element.$context.raw.index; showDetail(index); } }
                }
            });
        }

        function filterData(cat) {
            currentFilter = cat;
            document.querySelectorAll('.filter-btn').forEach(b => {
                b.classList.remove('ring-2', 'ring-slate-400', 'bg-slate-300');
                if (b.dataset.filter === cat) b.classList.add('ring-2', 'ring-slate-400');
            });
            renderList();
            updateChartVisibility();
        }

        function renderList() {
            const container = document.getElementById('eventList');
            container.innerHTML = '';
            const filtered = dokdoHistory.filter(d => currentFilter === 'all' || d.category === currentFilter);
            document.getElementById('itemCountText').innerText = `${filtered.length}ê°œ ì‚¬ê±´`;

            filtered.forEach((item) => {
                const idx = dokdoHistory.indexOf(item);
                const isActive = idx === selectedId;
                const div = document.createElement('div');
                div.className = `event-node p-4 rounded-xl cursor-pointer border border-transparent transition-all flex items-center gap-4 ${isActive ? 'active-event card-shadow' : 'hover:bg-slate-50'}`;
                div.onclick = () => showDetail(idx);
                div.innerHTML = `
                    <div class="flex flex-col items-center min-w-[50px]">
                        <span class="text-xs font-bold text-slate-400">${item.year}</span>
                        <div class="w-3 h-3 rounded-full" style="background-color: ${getCategoryColor(item.category, 1)}"></div>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-slate-800 text-sm">${item.title}</h4>
                        <p class="text-xs text-slate-500 line-clamp-1">${item.type}</p>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function showDetail(index) {
            selectedId = index;
            const data = dokdoHistory[index];
            const panel = document.getElementById('detailPanel');
            panel.classList.add('opacity-0', 'translate-y-4');
            
            setTimeout(() => {
                document.getElementById('detailTitle').innerText = data.title;
                document.getElementById('detailYearRange').innerText = `${data.year}ë…„`;
                document.getElementById('detailBgYear').innerText = data.year;
                document.getElementById('detailDesc').innerText = data.desc;
                document.getElementById('detailType').innerText = data.type;
                document.getElementById('detailImpact').innerText = data.impact;
                const badge = document.getElementById('detailBadge');
                badge.innerText = getCategoryLabel(data.category);
                badge.className = `px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest ${getBadgeClasses(data.category)}`;
                panel.classList.remove('opacity-0', 'translate-y-4');
                renderList();
            }, 200);
        }

        function updateChartVisibility() {
            chart.data.datasets[0].data = dokdoHistory.map((d, i) => ({
                x: d.year,
                y: getCategoryY(d.category),
                r: (currentFilter === 'all' || d.category === currentFilter) ? 8 : 0,
                index: i,
                category: d.category
            }));
            chart.update();
        }

        function getCategoryY(cat) {
            if (cat === 'korea') return 4;
            if (cat === 'international') return 3;
            if (cat === 'japan') return 2;
            if (cat === 'conflict') return 1;
            return 0;
        }

        function getCategoryColor(cat, opacity) {
            const colors = { korea: `rgba(30, 58, 138, ${opacity})`, international: `rgba(71, 85, 105, ${opacity})`, japan: `rgba(217, 119, 6, ${opacity})`, conflict: `rgba(220, 38, 38, ${opacity})` };
            return colors[cat] || `rgba(0,0,0,${opacity})`;
        }

        function getCategoryLabel(cat) {
            const labels = { korea: "ìš°ë¦¬ ì˜í†  ì…ì¦ ê¸°ë¡", japan: "ì¼ë³¸ì¸¡ ê³µì‹ ì‹œì¸", conflict: "ì˜í†  ë„ë°œ ë° ì™œê³¡", international: "êµ­ì œë²•ì  ì§€ìœ„ í™•ë¦½" };
            return labels[cat];
        }

        function getBadgeClasses(cat) {
            const classes = { korea: "bg-blue-900 text-white", japan: "bg-amber-100 text-amber-800", conflict: "bg-red-100 text-red-800", international: "bg-slate-100 text-slate-800" };
            return classes[cat];
        }
    </script>
</body>
</html>
